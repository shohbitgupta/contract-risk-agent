# =========================================================
# Real Estate Intent Rules (UP-RERA)
# =========================================================
# This file defines:
# - What legal intent a clause represents
# - Which vector index to query
# - What filters apply
# =========================================================

version: "1.1"

meta:
  domain: "indian_real_estate"
  framework: "RERA"
  description: >
    Intent detection and legal retrieval rules for Indian real estate
    Builder Buyer Agreements (BBAs), aligned with Central RERA Act,
    State RERA Rules, and State Model Agreements.

# ============================================================
# GLOBAL SETTINGS
# ============================================================

global:
  implicit_compliance_markers:
    - "as per the act"
    - "as per rera"
    - "in accordance with the act"
    - "subject to the act"
    - "subject to applicable rules"
    - "as prescribed under the act"
    - "as may be notified by the authority"
    - "in terms of the rera act"

  default_risk_if_uncertain: "medium"
  conservative_bias: true

# ============================================================
# BASE INTENTS (COMMON ACROSS STATES)
# ============================================================

intents:
  delay_in_possession:
    intent_name: "delay_in_possession"
    description: >
      Clauses dealing with timelines for handing over possession
      and consequences of delay.

    keywords:
      - "delay in possession"
      - "handing over possession"
      - "date of possession"
      - "completion period"
      - "offer of possession"

    mandatory_rera_anchors:
      - "RERA_ACT_SECTION_18"

    expected_compliance_mode:
      - "IMPLICIT"
      - "EXPLICIT"

    risk_rules:
      high:
        - "promoter shall not be liable"
        - "no compensation shall be payable"
        - "buyer waives right to refund"
      medium:
        - "subject to force majeure"
      low:
        - "as per the act"
        - "in accordance with rera"

    retrieval:
      indexes:
        - "model_bba"
        - "rera_act"
        - "rera_rules"
      filters:
        doc_type:
          - "model_agreement"
          - "rera_act"
          - "state_rule"

  force_majeure:
    intent_name: "force_majeure"
    description: >
      Clauses extending timelines due to uncontrollable events.

    keywords:
      - "force majeure"
      - "act of god"
      - "beyond the control"
      - "natural calamity"
      - "government order"

    mandatory_rera_anchors:
      - "RERA_ACT_SECTION_6"

    expected_compliance_mode:
      - "IMPLICIT"
      - "EXPLICIT"

    risk_rules:
      high:
        - "any reason whatsoever"
        - "financial difficulty"
      low:
        - "as defined under the act"

    retrieval:
      indexes:
        - "model_bba"
        - "rera_act"
      filters:
        doc_type:
          - "model_agreement"
          - "rera_act"

  refund_and_withdrawal:
    intent_name: "refund_and_withdrawal"
    description: >
      Clauses related to refund, withdrawal, and interest.

    keywords:
      - "refund"
      - "withdraw"
      - "termination by allottee"
      - "interest payable"

    mandatory_rera_anchors:
      - "RERA_ACT_SECTION_18"

    expected_compliance_mode:
      - "IMPLICIT"
      - "EXPLICIT"

    risk_rules:
      high:
        - "no refund shall be payable"
        - "without interest"
      medium:
        - "subject to deductions"
      low:
        - "as per the act"

    retrieval:
      indexes:
        - "model_bba"
        - "rera_act"
        - "rera_rules"
      filters:
        doc_type:
          - "model_agreement"
          - "rera_act"
          - "state_rule"

  defect_liability:
    intent_name: "defect_liability"
    description: >
      Clauses dealing with structural or workmanship defects.

    keywords:
      - "defect liability"
      - "structural defect"
      - "rectification"
      - "five years"

    mandatory_rera_anchors:
      - "RERA_ACT_SECTION_14_3"

    expected_compliance_mode:
      - "IMPLICIT"
      - "EXPLICIT"

    risk_rules:
      high:
        - "no defect liability"
        - "buyer waives defect claim"
      low:
        - "within five years"
        - "as per the act"

    retrieval:
      indexes:
        - "model_bba"
        - "rera_act"
      filters:
        doc_type:
          - "model_agreement"
          - "rera_act"

  rate_of_interest:
    intent_name: "rate_of_interest"
    description: >
      Clauses defining interest payable for defaults.

    keywords:
      - "rate of interest"
      - "interest payable"
      - "mclr"
      - "sbi lending rate"

    expected_compliance_mode:
      - "IMPLICIT"
      - "EXPLICIT"

    retrieval:
      indexes:
        - "rera_rules"
      filters:
        doc_type:
          - "state_rule"

  jurisdiction:
    intent_name: "jurisdiction"
    description: >
      Clauses defining dispute resolution and jurisdiction.

    keywords:
      - "jurisdiction"
      - "courts at"
      - "dispute resolution"
      - "authority"

    mandatory_rera_anchors:
      - "RERA_ACT_SECTION_31"
      - "RERA_ACT_SECTION_71"

    expected_compliance_mode:
      - "IMPLICIT"
      - "EXPLICIT"

    risk_rules:
      high:
        - "only civil courts"
        - "excluding rera authority"
      low:
        - "as per the act"

    retrieval:
      indexes:
        - "model_bba"
        - "rera_act"
      filters:
        doc_type:
          - "model_agreement"
          - "rera_act"

# ============================================================
# STATE-SPECIFIC OVERRIDES
# ============================================================

state_overrides:
  uttar_pradesh:
    rate_of_interest:
      mandatory_rera_anchors:
        - "UP_RERA_RULE_15"
    delay_in_possession:
      mandatory_rera_anchors:
        - "UP_RERA_RULE_16"
        - "RERA_ACT_SECTION_18"

  maharashtra:
    rate_of_interest:
      mandatory_rera_anchors:
        - "MAHA_RERA_RULE_18"
    delay_in_possession:
      mandatory_rera_anchors:
        - "MAHA_RERA_RULE_18"
        - "RERA_ACT_SECTION_18"

  karnataka:
    rate_of_interest:
      mandatory_rera_anchors:
        - "KARNATAKA_RERA_RULE_18"
    delay_in_possession:
      mandatory_rera_anchors:
        - "KARNATAKA_RERA_RULE_18"
        - "RERA_ACT_SECTION_18"

# ============================================================
# VIOLATION-ONLY INTENTS (ILLEGAL BY DESIGN)
# ============================================================

violation_only_intents:
  waiver_of_rera_rights:
    intent_name: "waiver_of_rera_rights"
    description: >
      Clauses where allottee waives statutory RERA rights.

    keywords:
      - "waives all rights"
      - "no claim shall lie"
      - "irrevocably waives"
      - "no remedy shall be available"

    violated_laws:
      - "RERA_ACT_SECTION_18"
      - "RERA_ACT_SECTION_79"
      - "RERA_ACT_SECTION_88"

    risk_level: "high"
    resolution: "CONTRADICTION"

    retrieval:
      indexes:
        - "rera_act"
      filters:
        doc_type:
          - "rera_act"

  exclusion_of_rera_jurisdiction:
    intent_name: "exclusion_of_rera_jurisdiction"
    description: >
      Clauses attempting to exclude RERA authority jurisdiction.

    keywords:
      - "only civil courts shall have jurisdiction"
      - "excluding rera authority"
      - "no complaint shall lie before authority"

    violated_laws:
      - "RERA_ACT_SECTION_31"
      - "RERA_ACT_SECTION_71"
      - "RERA_ACT_SECTION_79"

    risk_level: "high"
    resolution: "CONTRADICTION"

    retrieval:
      indexes:
        - "rera_act"
      filters:
        doc_type:
          - "rera_act"

  unilateral_modification:
    intent_name: "unilateral_modification"
    description: >
      Clauses allowing promoter unilateral changes without consent.

    keywords:
      - "sole discretion of the promoter"
      - "absolute right to alter"
      - "without consent of allottee"

    violated_laws:
      - "RERA_ACT_SECTION_14"
      - "RERA_ACT_SECTION_12"

    risk_level: "high"
    resolution: "CONTRADICTION"

    retrieval:
      indexes:
        - "rera_act"
      filters:
        doc_type:
          - "rera_act"
